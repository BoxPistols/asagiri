// ============================================================
// Snackbar / Toast Component
// ============================================================
// Material Design 3 inspired snackbars for notifications and messages
//
// Usage:
//   <div class="snackbar">Message sent</div>
//   <div class="snackbar snackbar-action">
//     <span class="snackbar-text">Item deleted</span>
//     <button class="snackbar-btn">Undo</button>
//   </div>

// Snackbar Container (for multiple snackbars)
.snackbar-container {
  position: fixed;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  z-index: 1500;
  pointer-events: none;

  // Bottom center (default)
  &,
  &.snackbar-bottom-center {
    bottom: 1.5rem;
    left: 50%;
    transform: translateX(-50%);
    align-items: center;
  }

  &.snackbar-bottom-left {
    bottom: 1.5rem;
    left: 1.5rem;
    transform: none;
    align-items: flex-start;
  }

  &.snackbar-bottom-right {
    bottom: 1.5rem;
    right: 1.5rem;
    transform: none;
    align-items: flex-end;
  }

  &.snackbar-top-center {
    top: 1.5rem;
    bottom: auto;
    left: 50%;
    transform: translateX(-50%);
    align-items: center;
    flex-direction: column-reverse;
  }

  &.snackbar-top-left {
    top: 1.5rem;
    bottom: auto;
    left: 1.5rem;
    transform: none;
    align-items: flex-start;
    flex-direction: column-reverse;
  }

  &.snackbar-top-right {
    top: 1.5rem;
    bottom: auto;
    right: 1.5rem;
    transform: none;
    align-items: flex-end;
    flex-direction: column-reverse;
  }
}

// Base Snackbar
.snackbar {
  // Layout
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  min-width: 280px;
  max-width: 560px;
  padding: 0.875rem 1rem;

  // Appearance
  background-color: var(--color-dark, #1d1d1d);
  color: #fff;
  border-radius: 8px;
  box-shadow: var(--elevation-3);

  // Typography
  font-size: 0.875rem;
  line-height: 1.4;

  // Animation
  opacity: 0;
  transform: translateY(100%);
  transition: opacity 0.2s ease-out, transform 0.3s ease-out;
  pointer-events: auto;

  // Light mode specific
  [data-theme="light"] &,
  :root:not([data-theme="dark"]) & {
    background-color: #323232;
  }

  // Dark mode specific
  [data-theme="dark"] & {
    background-color: var(--color-item-bg-dark, #2a2a2e);
    border: 1px solid var(--color-border, rgba(255, 255, 255, 0.1));
  }

  // Visible state
  &.show,
  &.active {
    opacity: 1;
    transform: translateY(0);
  }

  // Exiting state
  &.hiding {
    opacity: 0;
    transform: translateY(100%);
  }
}

// Snackbar Text
.snackbar-text {
  flex: 1;
  min-width: 0;
}

// Snackbar Action Button
.snackbar-btn {
  flex-shrink: 0;
  padding: 0.375rem 0.75rem;
  background-color: transparent;
  color: var(--color-primary-light, #4ec4df);
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  cursor: pointer;
  transition: background-color 0.15s ease;

  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  &:focus-visible {
    outline: 2px solid var(--color-primary-light, #4ec4df);
    outline-offset: 2px;
  }
}

// Snackbar Close Button
.snackbar-close {
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  margin-right: -0.25rem;
  padding: 0;
  background-color: transparent;
  color: rgba(255, 255, 255, 0.7);
  border: none;
  border-radius: 50%;
  font-size: 1.25rem;
  line-height: 1;
  cursor: pointer;
  transition: background-color 0.15s ease, color 0.15s ease;

  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #fff;
  }

  &:focus-visible {
    outline: 2px solid var(--color-primary-light, #4ec4df);
    outline-offset: 2px;
  }
}

// Snackbar Icon
.snackbar-icon {
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  margin-left: -0.25rem;

  svg {
    width: 24px;
    height: 24px;
  }
}

// Snackbar Variants

// With leading icon
.snackbar-with-icon {
  padding-left: 0.75rem;
}

// Multi-line
.snackbar-multiline {
  padding: 1rem;
  min-height: 68px;
  align-items: flex-start;

  .snackbar-text {
    padding-top: 0.125rem;
  }

  .snackbar-btn {
    margin-top: -0.125rem;
  }
}

// Snackbar Color Variants

.snackbar-success {
  background-color: var(--color-success, #00a859);

  .snackbar-btn {
    color: #fff;

    &:hover {
      background-color: rgba(0, 0, 0, 0.1);
    }
  }
}

.snackbar-warning {
  background-color: var(--color-warning, #ebbb0c);
  color: #000;

  .snackbar-btn {
    color: #000;

    &:hover {
      background-color: rgba(0, 0, 0, 0.1);
    }
  }

  .snackbar-close {
    color: rgba(0, 0, 0, 0.6);

    &:hover {
      color: #000;
    }
  }
}

.snackbar-danger {
  background-color: var(--color-danger, #e1323c);

  .snackbar-btn {
    color: #fff;

    &:hover {
      background-color: rgba(0, 0, 0, 0.1);
    }
  }
}

.snackbar-info {
  background-color: var(--color-info, #1ec2c2);

  .snackbar-btn {
    color: #fff;

    &:hover {
      background-color: rgba(0, 0, 0, 0.1);
    }
  }
}

// Filled Surface variant
.snackbar-surface {
  background-color: var(--color-box, #fff);
  color: var(--color-text, #4c5059);
  border: 1px solid var(--color-border, rgba(0, 0, 0, 0.1));

  [data-theme="dark"] & {
    background-color: var(--color-box, #18181b);
    color: var(--color-text, #e4e4e7);
    border-color: var(--color-border, rgba(255, 255, 255, 0.1));
  }

  .snackbar-btn {
    color: var(--color-primary, #31a9c7);

    &:hover {
      background-color: color-mix(in srgb, var(--color-primary) 10%, transparent);
    }
  }

  .snackbar-close {
    color: var(--color-text-secondary, #666);

    &:hover {
      color: var(--color-text, #4c5059);
      background-color: var(--color-item-bg, #e8e8f1);

      [data-theme="dark"] & {
        color: var(--color-text, #e4e4e7);
        background-color: var(--color-item-bg, #1f1f23);
      }
    }
  }
}

// Progress indicator (for auto-dismiss)
.snackbar-progress {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  background-color: rgba(255, 255, 255, 0.3);
  border-radius: 0 0 8px 8px;
  animation: snackbar-progress-shrink var(--snackbar-duration, 5s) linear forwards;
}

@keyframes snackbar-progress-shrink {
  from {
    width: 100%;
  }
  to {
    width: 0%;
  }
}

// Stacked snackbars animation
.snackbar:nth-child(2) {
  transform: translateY(0) scale(0.95);
  opacity: 0.9;

  &.show {
    transform: translateY(-4px) scale(0.95);
  }
}

.snackbar:nth-child(3) {
  transform: translateY(0) scale(0.9);
  opacity: 0.7;

  &.show {
    transform: translateY(-8px) scale(0.9);
  }
}

// Responsive adjustments
@media (max-width: 600px) {
  .snackbar-container {
    left: 1rem;
    right: 1rem;
    transform: none;

    &.snackbar-bottom-center,
    &.snackbar-top-center {
      left: 1rem;
      right: 1rem;
      transform: none;
    }
  }

  .snackbar {
    min-width: auto;
    max-width: none;
    width: 100%;
  }
}

// Reduced motion
@media (prefers-reduced-motion: reduce) {
  .snackbar {
    transition: opacity 0.15s ease;
    transform: none;

    &.show,
    &.active {
      transform: none;
    }

    &.hiding {
      transform: none;
    }
  }

  .snackbar-progress {
    animation: none;
    width: 100%;
  }
}
